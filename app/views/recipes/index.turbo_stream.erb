<%= turbo_stream.remove("recipes_placeholder") %>
<% if @recipes.empty? %>
  <%= turbo_stream.update "recipes_list" do %>
    <%= render 'no_results' %>
  <% end %>
<% else %>
  <%= turbo_stream.public_send(@search_active ? :update : :append, "recipes_list") do %>
    <% @recipes.each do |recipe| %>
      <%= render recipe %>
    <% end %>
  <% end %>
<% end %>
<%= turbo_stream.replace "recipes_pagination" do %>
  <% if @pagy.next.present? %>
    <%= turbo_frame_tag "recipes_pagination", 
                        src: recipes_url(page: @pagy.next, search_text: params[:search_text], search_ingredient_ids: params[:search_ingredient_ids],
                        user_id: params[:user_id], format: "turbo_stream"), loading: "lazy" %>
  <% end %>
<% end %>
